
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Creating NeuroML models &#8212; NeuroML Documentation</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet">
  <link href="../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/zcustom.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script>
        const thebe_selector = ".thebe,.cell"
        const thebe_selector_input = "pre,.cell_input div.highlight"
        const thebe_selector_output = ".output,.cell_output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Validating NeuroML Models" href="ValidatingNeuroMLModels.html" />
    <link rel="prev" title="Finding and sharing NeuroML models" href="FindingNeuroMLModels.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">NeuroML Documentation</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  User documentation
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="MissionAndAims.html">
   Mission and Aims
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Usage.html">
   How to use this documentation
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="GettingStarted.html">
   Getting started with NeuroML
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="SingleNeuronExample.html">
     Simulating a regular spiking Izhikevich neuron
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="NML2_examples/SingleNeuron.html">
     Interactive single Izhikevich neuron NeuroML example
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="IzhikevichNetworkExample.html">
     A two population network of regular spiking Izhikevich neurons
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="NML2_examples/IzhikevichNetwork.html">
     Interactive two population network example
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="SingleCompartmentHHExample.html">
     Simulating a single compartment Hodgkin-Huxley neuron
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="NML2_examples/HH_single_compartment.html">
     Interactive single compartment HH example
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="MultiCompartmentOLMexample.html">
     Simulating a multi compartment OLM neuron
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="NML2_examples/OLM.html">
     Interactive multi-compartment OLM cell example
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="FindingNeuroMLModels.html">
   Finding and sharing NeuroML models
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Creating NeuroML models
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="ValidatingNeuroMLModels.html">
   Validating NeuroML Models
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="VisualisingNeuroMLModels.html">
   Visualising NeuroML Models
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="SimulatingNeuroMLModels.html">
   Simulating NeuroML Models
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="OptimisingNeuroMLModels.html">
   Optimising/fitting NeuroML Models
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="Specification.html">
   Schema/Specification
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="NeuroMLv2.html">
     NeuroML v2
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
    <label for="toctree-checkbox-3">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="Schemas/NeuroMLCoreDimensions.html">
       NeuroMLCoreDimensions
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="Schemas/NeuroMLCoreCompTypes.html">
       NeuroMLCoreCompTypes
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="Schemas/Cells.html">
       Cells
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="Schemas/Channels.html">
       Channels
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="Schemas/Synapses.html">
       Synapses
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="Schemas/Inputs.html">
       Inputs
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="Schemas/Networks.html">
       Networks
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="Schemas/PyNN.html">
       PyNN
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="Schemas/Simulation.html">
       Simulation
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="NeuroMLv1.html">
     NeuroML v1
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="UsingNeuroMLv2AndLEMS.html">
   Using NeuroML 2 and LEMS
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="Conventions.html">
     Conventions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="UnitsAndDimensions.html">
     Units and dimensions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Paths.html">
     Paths
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="QuantitiesAndRecording.html">
     Quantities and recording
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="LEMSSimulation.html">
     LEMS Simulation files
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="ExtendingNeuroMLv2WithLEMS.html">
     Extending NeuroML with LEMS
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="Software/Software.html">
   Software and Tools
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="Software/pyNeuroML.html">
     pyNeuroML
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Software/libNeuroML.html">
     libNeuroML
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Software/pyLEMS.html">
     pyLEMS
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Software/NeuroMLlite.html">
     NeuroMLlite
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Software/jNeuroML.html">
     jNeuroML
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Software/jLEMS.html">
     jLEMS
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Software/NeuroML_API.html">
     NeuroML C++ API
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Software/MatLab.html">
     MatLab NeuroML Toolbox
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Software/SupportingTools.html">
     Tools and resources with NeuroML support
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Publications.html">
   Citing NeuroML and related publications
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="FAQ.html">
   Frequently asked questions (FAQ)
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  NeuroML events
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../Events/202109-COMBINE.html">
   October 2021: NeuroML development workshop at COMBINE meeting
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Events/202108-INCF-Training-Week.html">
   August 2021: NeuroML tutorial at INCF Training Weeks
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Events/202107-CNS2021.html">
   July 2021: NeuroML tutorial at CNS*2021
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Events/202103-Harmony.html">
   March 2021: NeuroML hackathon at HARMONY 2021
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Events/PastEvents.html">
   Past NeuroML Events
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  The NeuroML Initiative
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../NeuroMLOrg/CommunicationChannels.html">
   Getting in touch
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../NeuroMLOrg/Standards.html">
   Overview of standards in neuroscience
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../NeuroMLOrg/History.html">
   A brief history of NeuroML
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../NeuroMLOrg/Board.html">
   NeuroML Editorial Board
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../NeuroMLOrg/BoardHistory.html">
     History of the NeuroML Editorial Board
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../NeuroMLOrg/BoardMeetingReports.html">
     Workshop and Meeting reports
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../NeuroMLOrg/ScientificCommittee.html">
   NeuroML Scientific Committee
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../NeuroMLOrg/Funding.html">
   Funding and Acknowledgements
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../NeuroMLOrg/Contributors.html">
   NeuroML contributors
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../NeuroMLOrg/CoC.html">
   Code of Conduct
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Developer documentation
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../Devdocs/Devdocs.html">
   Overview
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
  <label for="toctree-checkbox-7">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../Devdocs/DevSOP.html">
     Contribution guidelines
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Devdocs/ReleaseProcess.html">
     Release Process
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Devdocs/UpdatingStandard.html">
     Making changes to the NeuroML standard
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Devdocs/InteractionOtherBits.html">
   Interaction with other languages and standards
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Reference
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../Reference/Glossary.html">
   Glossary
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Reference/zBibliography.html">
   Bibliography
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/Userdocs/CreatingNeuroMLModels.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/NeuroML/Documentation"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/NeuroML/Documentation/issues/new?title=Issue%20on%20page%20%2FUserdocs/CreatingNeuroMLModels.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        <a class="edit-button" href="https://github.com/NeuroML/Documentation/edit/master/source/Userdocs/CreatingNeuroMLModels.md"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Edit this page"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#writing-models-from-scratch-using-python-neuroml-tools">
   Writing models from scratch using Python NeuroML tools
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#converting-models-from-neuron-to-neuroml">
   Converting models from NEURON to NeuroML
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#converting-conductance-based-cell-models-to-neuroml">
   Converting conductance based cell models to NeuroML
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#share-original-model-code-in-github-repo">
     Share original model code in GitHub repo
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#create-an-initial-version-in-neuroml-2">
     Create an initial version in NeuroML 2
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#convert-channels">
     Convert channels
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#compare-single-compartment-cell-with-channels">
     Compare single compartment cell with channels
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#add-omv-tests">
     Add OMV tests
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#compare-multi-compartmental-cell-with-channels">
     Compare multi-compartmental cell with channels
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#re-optimising-cell-models">
     (Re)optimising cell models
    </a>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Creating NeuroML models</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#writing-models-from-scratch-using-python-neuroml-tools">
   Writing models from scratch using Python NeuroML tools
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#converting-models-from-neuron-to-neuroml">
   Converting models from NEURON to NeuroML
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#converting-conductance-based-cell-models-to-neuroml">
   Converting conductance based cell models to NeuroML
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#share-original-model-code-in-github-repo">
     Share original model code in GitHub repo
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#create-an-initial-version-in-neuroml-2">
     Create an initial version in NeuroML 2
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#convert-channels">
     Convert channels
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#compare-single-compartment-cell-with-channels">
     Compare single compartment cell with channels
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#add-omv-tests">
     Add OMV tests
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#compare-multi-compartmental-cell-with-channels">
     Compare multi-compartmental cell with channels
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#re-optimising-cell-models">
     (Re)optimising cell models
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="creating-neuroml-models">
<span id="userdocs-creating-models"></span><h1>Creating NeuroML models<a class="headerlink" href="#creating-neuroml-models" title="Permalink to this headline">¶</a></h1>
<div class="section" id="writing-models-from-scratch-using-python-neuroml-tools">
<span id="userdocs-creating-models-from-scratch"></span><h2>Writing models from scratch using Python NeuroML tools<a class="headerlink" href="#writing-models-from-scratch-using-python-neuroml-tools" title="Permalink to this headline">¶</a></h2>
<p>Please see the <a class="reference internal" href="GettingStarted.html#userdocs-getting-started-neuroml"><span class="std std-ref">Getting Started with NeuroML section</span></a> for quick examples on how you can use <a class="reference internal" href="Software/pyNeuroML.html#pyneuroml"><span class="std std-ref">pyNeuroML</span></a> to create NeuroML models and run them.</p>
</div>
<div class="section" id="converting-models-from-neuron-to-neuroml">
<span id="userdocs-creating-models-from-neuron"></span><h2>Converting models from NEURON to NeuroML<a class="headerlink" href="#converting-models-from-neuron-to-neuroml" title="Permalink to this headline">¶</a></h2>
<p>Model simulations written using the NEURON simulator can be converted to NeuroML using the <a class="reference internal" href="Software/pyNeuroML.html#pyneuroml"><span class="std std-ref">pyNeuroML</span></a> API:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyneuroml.neuron</span> <span class="kn">import</span> <span class="n">export_to_neuroml2</span>
<span class="o">..</span>
<span class="o">..</span>

<span class="n">export_to_neuroml2</span><span class="p">(</span><span class="s2">&quot;test.hoc&quot;</span><span class="p">,</span> <span class="s2">&quot;test.morphonly.cell.nml&quot;</span><span class="p">,</span> <span class="n">includeBiophysicalProperties</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="converting-conductance-based-cell-models-to-neuroml">
<span id="userdocs-creating-models-converting-conductance"></span><h2>Converting conductance based cell models to NeuroML<a class="headerlink" href="#converting-conductance-based-cell-models-to-neuroml" title="Permalink to this headline">¶</a></h2>
<div class="warning admonition">
<p class="admonition-title">Needs improvements</p>
<p>This section needs improvements, verfication, and re-writing to make it easier to follow.
Related issue: <a class="reference external" href="https://github.com/NeuroML/Documentation/issues/31">https://github.com/NeuroML/Documentation/issues/31</a></p>
</div>
<div class="figure align-center" id="id2">
<a class="reference internal image-reference" href="../_images/osb-conversion.png"><img alt="Schamatic of process of converting models to NeuroML" src="../_images/osb-conversion.png" style="width: 60%;" /></a>
<p class="caption"><span class="caption-number">Fig. 27 </span><span class="caption-text">Procedures and tools to convert models from native formats to NeuroML and PyNN (Taken from Gleeson et al. 2019 <span id="id1">[<a class="reference internal" href="../Reference/zBibliography.html#id12">GCM+19</a>]</span>)</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
<div class="section" id="share-original-model-code-in-github-repo">
<span id="userdocs-creating-models-converting-conductance-github"></span><h3>Share original model code in GitHub repo<a class="headerlink" href="#share-original-model-code-in-github-repo" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Make simple script with one/each cell - simple current pulse into each (<a class="reference external" href="https://github.com/mbezaire/ca1/blob/development/NeuroML2/olm.hoc">example1</a>, <a class="reference external" href="https://github.com/OpenSourceBrain/MiglioreEtAl14_OlfactoryBulb3D/blob/master/NEURON/mitral.hoc">example2</a>)</p></li>
<li><p>Make soma only example with all channels (ideally one where channels can easily be added/commented out) - apply current pulse (<a class="reference external" href="https://github.com/OpenSourceBrain/BlueBrainProjectShowcase/blob/master/NMC/NEURON/Test_Soma.hoc">example</a> in NEURON)</p></li>
<li><p>Make passive version of multi-compartmental cell with multiple locations recorded</p></li>
<li><p>Make multi-compartmental cell with multiple channels and calcium dynamics, with channels specified in separate files</p></li>
</ul>
</div>
<div class="section" id="create-an-initial-version-in-neuroml-2">
<span id="userdocs-creating-models-converting-conductance-initialnml2"></span><h3>Create an initial version in NeuroML 2<a class="headerlink" href="#create-an-initial-version-in-neuroml-2" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Create LEMS*.xml (<a class="reference external" href="https://github.com/OpenSourceBrain/BlueBrainProjectShowcase/blob/master/NMC/NeuroML2/LEMS_Soma_AllNML2.xml">example</a>) with *.net.nml (<a class="reference external" href="https://github.com/OpenSourceBrain/BlueBrainProjectShowcase/blob/master/NMC/NeuroML2/Soma_AllNML2.net.nml">example</a>) and *.cell.nml (<a class="reference external" href="https://github.com/OpenSourceBrain/BlueBrainProjectShowcase/blob/master/NMC/NeuroML2/Soma_AllNML2.cell.nml">example</a>) - for a cell with only a soma (don’t try to match a multi-compartmental cell with channels to the original at this first stage)</p></li>
<li><p>Start off with only passive parameters (capacitance, ax resistance and 1 leak current) set; gradually add channels as in 3); apply current pulse and save soma membrane potential to file</p></li>
<li><p>Ensure all <code class="docutils literal notranslate"><span class="pre">*nml</span></code> files are <a class="reference internal" href="ValidatingNeuroMLModels.html#userdocs-validating-models"><span class="std std-ref">valid</span></a></p></li>
<li><p>Ensure <code class="docutils literal notranslate"><span class="pre">LEMS*.xml</span></code> runs with <code class="docutils literal notranslate"><span class="pre">jnml;</span></code> visually compare behaviour with original simple script from the previous section)</p></li>
<li><p>Install NEURON; ensure <code class="docutils literal notranslate"><span class="pre">LEMS*.xml</span></code> runs with <code class="docutils literal notranslate"><span class="pre">jnml</span> <span class="pre">-neuron</span></code></p></li>
<li><p>Commit LEMS/NeuroML code to GitHub</p></li>
</ul>
</div>
<div class="section" id="convert-channels">
<span id="userdocs-creating-models-converting-conductance-convert-channels"></span><h3>Convert channels<a class="headerlink" href="#convert-channels" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Restructure/annotate/comment channel files in original model to be as clear as possible and ideally all in the same overall structure (see mod files <a class="reference external" href="https://github.com/mbezaire/ca1/tree/development">here</a>).</p></li>
<li><p>(Optional) Create a (Python) script/notebook which contains the core activation variable expressions for the channels; this can be useful to restructure/test/plot/alter units of the expressions before generating the equivalent in NeuroML (example)</p></li>
<li><p>If you are using NEURON, use <code class="docutils literal notranslate"><span class="pre">pynml-modchananalysis</span></code> to generate plots of the activation variables for the channels in the mod files (<a class="reference external" href="https://github.com/NeuroML/pyNeuroML/blob/master/examples/analyseNaMod.sh">example1</a>, <a class="reference external" href="https://github.com/OpenSourceBrain/BlueBrainProjectShowcase/blob/master/NMC/NEURON/analyse.sh">example2</a>).</p></li>
<li><p>Start from an existing similar example of an ion channel in NeuroML (<a class="reference external" href="https://github.com/OpenSourceBrain/AllenInstituteNeuroML/tree/master/CellTypesDatabase/models/NeuroML2">examples1</a>, <a class="reference external" href="https://github.com/RokasSt/Thalamocortical/tree/master/NeuroML2/channels">examples2</a>, <a class="reference external" href="https://github.com/mbezaire/ca1/tree/development/NeuroML2/channels">examples3</a>)</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">pynml-channelanalysis</span></code> to generate similar plots for your NeuroML based channels as your mod channels; these can easily be plotted for adding to your GitHub repo as summary pages (<a class="reference external" href="https://github.com/mbezaire/ca1/blob/development/NeuroML2/channels/channel_summary/README.md">example1</a>, <a class="reference external" href="https://github.com/OpenSourceBrain/MiglioreEtAl14_OlfactoryBulb3D/blob/master/NeuroML2/Channels/channel_summary/README.md">example2</a>).</p></li>
<li><p>Create a script to load the output of mod analysis and nml analysis and compare the outputs (<a class="reference external" href="https://github.com/OpenSourceBrain/BlueBrainProjectShowcase/blob/master/NMC/NeuroML2/compare_nml2_mods.py">example</a>).</p></li>
</ul>
</div>
<div class="section" id="compare-single-compartment-cell-with-channels">
<span id="userdocs-creating-models-converting-conductance-compare-single-comp"></span><h3>Compare single compartment cell with channels<a class="headerlink" href="#compare-single-compartment-cell-with-channels" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Start by comparing passive soma example in original to passive NeuroML version</p></li>
<li><p>Gradually test cell with passive conductance and <em>each channel individually</em>. Plot v along with rate variables for each channel &amp; compare how they look during current pulse (<a class="reference external" href="https://github.com/OpenSourceBrain/BlueBrainProjectShowcase/blob/master/NMC/NEURON/Test_Soma.hoc">example in NEURON</a> vs <a class="reference external" href="https://github.com/OpenSourceBrain/BlueBrainProjectShowcase/blob/master/NMC/NeuroML2/Soma_AllNML2.cell.nml">example in NeuroML</a> and <a class="reference external" href="https://github.com/OpenSourceBrain/BlueBrainProjectShowcase/blob/master/NMC/NeuroML2/LEMS_Soma_AllNML2.xml">LEMS</a>)</p></li>
<li><p>Test in <code class="docutils literal notranslate"><span class="pre">jnml</span></code> first, then in Neuron with <code class="docutils literal notranslate"><span class="pre">jnml</span> <span class="pre">-neuron</span></code></p></li>
</ul>
</div>
<div class="section" id="add-omv-tests">
<span id="userdocs-creating-models-converting-conductance-add-omv-tests"></span><h3>Add OMV tests<a class="headerlink" href="#add-omv-tests" title="Permalink to this headline">¶</a></h3>
<div class="dropdown tip admonition">
<p class="admonition-title">Optional, but recommended.</p>
<p>This step is optional, but recommended.</p>
</div>
<ul class="simple">
<li><p>Install the <a class="reference external" href="https://github.com/OpenSourceBrain/osb-model-validation">Open Source Brain Model validation framework</a> (OMV) - test on your local machine on standard examples (example: <a class="reference external" href="https://github.com/OpenSourceBrain/L5bPyrCellHayEtAl2011">Hay et al.</a>)</p></li>
<li><p>Add OMV tests to native code (<a class="reference external" href="https://github.com/OpenSourceBrain/GranCellSolinasEtAl10/blob/master/NEURON/.test.nrnpy.omt">example</a>), e.g. test the spike times of cell when simple current pulse applied</p></li>
<li><p>Add OMV tests for NeuroML version, reusing the Model Emergent Property (<code class="docutils literal notranslate"><span class="pre">*.mep</span></code>) file (<a class="reference external" href="https://github.com/mbezaire/ca1/blob/development/NeuroML2/cells/tests/.test.sca.jnmlnrn.omt">example</a>)</p></li>
</ul>
</div>
<div class="section" id="compare-multi-compartmental-cell-with-channels">
<span id="userdocs-creating-models-converting-conductance-compare-multi-comp"></span><h3>Compare multi-compartmental cell with channels<a class="headerlink" href="#compare-multi-compartmental-cell-with-channels" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>You can export morphologies on <a class="reference external" href="https://neuromorpho.org">NeuroMorpho.org</a> to NeuroML2 (<a class="reference external" href="https://github.com/NeuralEnsemble/NeuroinformaticsTutorial/blob/master/Exercises/Exercise1_NeuroMorpho_to_OSB.md">example</a>)</p></li>
<li><p>If you are using NEURON, export morphology from NEURON using pyNeuroML (<a class="reference external" href="https://github.com/OpenSourceBrain/SmithEtAl2013-L23DendriticSpikes/blob/master/NeuroML2/export_nml2.py">example</a>); this will be easier if there is a hoc script with just a single cell instance as in section 1). While there is the option to use <code class="docutils literal notranslate"><span class="pre">includeBiophysicalProperties=True</span></code> and this will attempt to export the conductance densities on different groups, it may be better to consolidate these and add them afterwards using correctly named groups and the most efficient representation of conductance density to group relationships (<a class="reference external" href="https://github.com/OpenSourceBrain/MiglioreEtAl14_OlfactoryBulb3D/blob/master/Python/Export/export_mitral.py">example</a>).</p>
<ul>
<li><p>Alternatively manually add the <code class="docutils literal notranslate"><span class="pre">&lt;channelDensity&gt;</span></code> elements to the cell file (as <a class="reference external" href="https://github.com/OpenSourceBrain/SmithEtAl2013-L23DendriticSpikes/blob/master/NeuroML2/L23_NoHotSpot.cell.nml#L16711">here</a>).</p></li>
</ul>
</li>
<li><p>As with the single compartment example, it’s best to start off with the passive case, compare that to the original code (for v at multiple locations), and gradually add channels.</p></li>
<li><p>Many projects on OSB were originally converted from the original format (NEURON, GENESIS, etc.) to NeuroML v1 using <a class="reference internal" href="Software/SupportingTools.html#userdocs-supporting-apps-neuroconstruct"><span class="std std-ref">neuroConstruct</span></a> (see <a class="reference external" href="http://www.opensourcebrain.org/search_custom_field?f%5B%5D=43&amp;op%5B43%5D=~&amp;v%5B43%5D%5B%5D=neuroConstruct">here</a> for a list of these). neuroConstruct has good support for export to NeuroML v2, and this code could form the basis for your conversion. More on using neuroConstruct <a class="reference external" href="http://www.opensourcebrain.org/docs#Using_neuroConstruct_Based_Projects">here</a> and details on conversion of models to NeuroML v1 <a class="reference external" href="http://www.neuroconstruct.org/docs/importneuron.html#Converting+mod+file%2FGENESIS+script+channels+into+ChannelML">here</a>.</p></li>
</ul>
</div>
<div class="section" id="re-optimising-cell-models">
<span id="userdocs-creating-models-converting-conductance-reoptimise"></span><h3>(Re)optimising cell models<a class="headerlink" href="#re-optimising-cell-models" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>You can use Neurotune inside pyNeuroML to re-optimise your cell models. An example is <a class="reference external" href="https://github.com/NeuroML/pyNeuroML/blob/master/examples/tuneHHCell.py">here</a></p></li>
</ul>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "NeuroML/Documentation",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./Userdocs"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="FindingNeuroMLModels.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Finding and sharing NeuroML models</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="ValidatingNeuroMLModels.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Validating NeuroML Models</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By NeuroML contributors<br/>
    
        &copy; Copyright 2021.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>